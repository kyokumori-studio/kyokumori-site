<!DOCTYPE html> <!-- 宣告這是一份 HTML5 文件 -->
<html lang="zh-Hant"> <!-- 網頁語言設定為繁體中文 -->

<head>
  <meta charset="UTF-8" /> <!-- 設定編碼為 UTF-8，支援中文 -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>曲守工作室 Kyokumori Studio</title> <!-- 標題列顯示的名稱 -->
  <link rel="stylesheet" href="style.css" /> <!-- 外部 CSS 樣式表連結 -->
</head>

<body>

  <!-- 網站上方導覽列（Header） -->
  <header>
    <div class="container nav">
      <!-- ✅ 改為乾淨對齊的 logo 標區：圖片 + 中文 + 英文 -->
      <a class="logo-link" href="/">
        <!-- 圓形 logo 圖片 -->
        <img src="logo.png" alt="Logo" class="logo-img" />

        <!-- 文字組合：中文主標＋英文副標（同行） -->
        <div class="logo-text-group">
          <span class="logo-text-zh">曲守工作室</span>
          <span class="logo-text-en">Kyokumori Studio</span>
        </div>
      </a>


      <!-- 導覽列選單 -->
      <nav>
        <a href="#">首頁</a>
        <a href="#resources">素材庫</a> <!-- 錨點連到下方素材庫區塊 -->
        <a href="#">關於我們</a>
        <a href="#">聯絡我們</a>
      </nav>
    </div>
  </header>

  <!-- Hero 區（首頁第一印象區塊） -->
  <section class="hero">
    <div class="container">
      <h1>曲守工作室 Kyokumori Studio</h1>
      <p>創作 × 技術 × 即時互動，構築角色與觀眾的連結橋梁</p>
    </div>
  </section>

  <!--作品集-->
  <section class="featured-carousel">
    <div class="container">
      <h2 class="section-title">推薦作品</h2>

      <div class="carousel-wrapper" onmouseenter="hoverEnter()" onmouseleave="hoverLeave()">
        <button class="arrow left" onclick="scrollCarousel(-1)">←</button>

        <div class="carousel-window">
          <div class="carousel" id="video-carousel">
            <div class="video-card">
              <div class="video-shell">
                <iframe loading="lazy" decoding="async" width="337" height="599"
                  src="https://www.youtube.com/embed/at9pIv1SDfE" frameborder="0"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                  referrerpolicy="strict-origin-when-cross-origin" allowfullscreen class="lazy-iframe"></iframe>
              </div>
            </div>
            <div class="video-card">
              <div class="video-shell">
                <iframe loading="lazy" decoding="async" width="337" height="599"
                  src="https://www.youtube.com/embed/Z5gCOttIj9E" frameborder="0"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                  referrerpolicy="strict-origin-when-cross-origin" allowfullscreen class="lazy-iframe"></iframe>
              </div>
            </div>
            <div class="video-card">
              <div class="video-shell">
                <iframe src="https://www.youtube.com/embed/at9pIv1SDfE" loading="lazy" decoding="async" allowfullscreen
                  class="lazy-iframe"></iframe>
              </div>
            </div>
            <div class="video-card">
              <div class="video-shell">
                <iframe src="https://www.youtube.com/embed/at9pIv1SDfE" loading="lazy" decoding="async" allowfullscreen
                  class="lazy-iframe"></iframe>
              </div>
            </div>
            <div class="video-card">
              <div class="video-shell">
                <iframe src="https://www.youtube.com/embed/at9pIv1SDfE" loading="lazy" decoding="async" allowfullscreen
                  class="lazy-iframe"></iframe>
              </div>
            </div>
          </div>
        </div>

        <button class="arrow right" onclick="scrollCarousel(1)">→</button>
      </div>
    </div>
  </section>

  <!-- 免費素材庫介紹區 -->
  <section class="resources-intro" id="resources">
    <div class="container">
      <h2>免費素材庫 Free Resources</h2>
      <p>提供免費音樂、音效與視覺素材，幫助你輕鬆創作！</p>
    </div>
  </section>

  <!-- 三分類入口卡片區 -->
  <section class="resource-portal">
    <div class="container cards">

      <!-- 音樂素材卡片 -->
      <a class="card" href="#music">
        <img src="https://via.placeholder.com/300x200?text=音樂素材" alt="音樂素材" />
        <h3>音樂素材</h3>
        <p>免費 BGM 與音效下載</p>
      </a>

      <!-- 插圖素材卡片 -->
      <a class="card" href="#images">
        <img src="https://via.placeholder.com/300x200?text=插圖素材" alt="插圖素材" />
        <h3>插圖素材</h3>
        <p>邊框、裝飾、背景圖免費使用</p>
      </a>

      <!-- 模板素材卡片 -->
      <a class="card" href="#templates">
        <img src="https://via.placeholder.com/300x200?text=模板素材" alt="模板素材" />
        <h3>模板素材</h3>
        <p>Shorts、字幕、封面排版模板包</p>
      </a>

    </div>
  </section>

  <!-- 頁尾區塊（Footer） -->
  <footer>
    <div class="container footer-content">
      <div class="footer-left">
        <p>© 2026 曲守工作室 Kyokumori Studio.</p>
        <p>以角色為核心，連結創作、技術與觀眾的情感橋梁。</p>
      </div>
      <div class="footer-right">
        <p>📧 hello@kyokumori.studio</p>
        <p>☕ <a href="#">Ko-fi: ko-fi.com/kyokumori</a></p>
        <p>🕊️ X: @kyokumori_studio</p>
      </div>
    </div>
  </footer>

  <script>
    const carousel = document.getElementById("video-carousel");
    const gap = 24;
    let cardWidth;
    let isAnimating = false;
    let autoScrollTimer;
    let isHovered = false;

    function setupReorderCarousel() {
      const cards = carousel.querySelectorAll(".video-card");
      cardWidth = carousel.querySelector(".video-card").offsetWidth + gap;

      autoScrollTimer = setInterval(() => {
        if (!isHovered) slideOnce();
      }, 3000);
    }

    function slideOnce() {
      if (isAnimating) return;
      isAnimating = true;

      const cardWidthWithGap = cardWidth; // 已有 gap 加成
      const firstCard = carousel.querySelector(".video-card");

      // ✅ 預先 append 第一張卡片到最後（讓動畫時已在場景中）
      carousel.appendChild(firstCard);

      // ✅ 立刻移動 carousel 整排到「-1 張」的位置
      carousel.style.transition = 'none';
      carousel.style.transform = `translateX(-${cardWidthWithGap}px)`;

      // ✅ 強迫瀏覽器重繪（讓 transform 生效）
      void carousel.offsetWidth;

      // ✅ 開始動畫回到 0，像是把畫面拉正
      carousel.style.transition = 'transform 0.4s ease';
      carousel.style.transform = 'translateX(0)';

      // ✅ 動畫結束後，reset 狀態
      setTimeout(() => {
        carousel.style.transition = 'none';
        carousel.style.transform = 'none';
        isAnimating = false;
      }, 400);
    }

    function scrollCarousel(direction) {
      // 支援左右按鈕（目前只實作右）
      if (direction === 1) {
        slideOnce();
      } else {
        // 如果想支援左滑，要多一步：先將最後一張搬到前面，再從右滑入
        if (isAnimating) return;
        isAnimating = true;

        const cards = carousel.querySelectorAll(".video-card");
        const last = cards[cards.length - 1];
        carousel.insertBefore(last, cards[0]);

        carousel.style.transition = "none";
        carousel.style.transform = `translateX(-${cardWidth}px)`;

        requestAnimationFrame(() => {
          carousel.style.transition = "transform 0.4s ease";
          carousel.style.transform = `translateX(0px)`;

          setTimeout(() => {
            carousel.style.transition = "";
            isAnimating = false;
          }, 400);
        });
      }
    }

    function pauseAutoScroll() {
      isHovered = true;
      clearInterval(autoScrollTimer);
    }

    function resumeAutoScroll() {
      isHovered = false;
      clearInterval(autoScrollTimer);
      autoScrollTimer = setInterval(() => {
        if (!isHovered) slideOnce();
      }, 3000);
    }

    function hoverEnter() {
      showArrows();
      pauseAutoScroll();
    }

    function hoverLeave() {
      hideArrows();
      resumeAutoScroll();
    }

    function showArrows() {
      document.querySelectorAll(".arrow").forEach(btn => btn.style.opacity = 1);
    }

    function hideArrows() {
      document.querySelectorAll(".arrow").forEach(btn => btn.style.opacity = 0);
    }

    window.addEventListener("load", () => {
      setupReorderCarousel(); // ✅ 一上線就啟動輪播
    });

    document.querySelectorAll('.lazy-iframe').forEach(iframe => {
      iframe.addEventListener('load', () => {
        iframe.style.opacity = '1';
      });
    });

  </script>

</body>

</html>
