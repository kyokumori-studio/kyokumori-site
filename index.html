<!DOCTYPE html>
<!-- 宣告這是一份 HTML5 文件 -->
<html lang="zh-Hant"> <!-- 網頁語言設定為繁體中文 -->

<head>
  <meta charset="utf-8" /> <!-- 設定編碼為 UTF-8，支援中文 -->
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>曲守工作室 Kyokumori Studio</title> <!-- 標題列顯示的名稱 -->
  <link href="style.css" rel="stylesheet" /> <!-- 外部 CSS 樣式表連結 -->
</head>

<body>
  <!-- 網站上方導覽列（Header） -->
  <header>
    <div class="container nav">
      <!-- ✅ 改為乾淨對齊的 logo 標區：圖片 + 中文 + 英文 -->
      <a class="logo-link" href="/">
        <!-- 圓形 logo 圖片 -->
        <img alt="Logo" class="logo-img" src="logo.png" />
        <!-- 文字組合：中文主標＋英文副標（同行） -->
        <div class="logo-text-group">
          <span class="logo-text-zh">曲守工作室</span>
          <span class="logo-text-en">Kyokumori Studio</span>
        </div>
      </a>
      <!-- 導覽列選單 -->
      <nav>
        <a href="#">首頁</a>
        <a href="#resources">素材庫</a> <!-- 錨點連到下方素材庫區塊 -->
        <a href="#">關於我們</a>
        <a href="#">聯絡我們</a>
      </nav>
    </div>
  </header>
  <!-- Hero 區（首頁第一印象區塊） -->
  <section class="hero">
    <div class="container">
      <h1>曲守工作室 Kyokumori Studio</h1>
      <p>創作 × 技術 × 即時互動，構築角色與觀眾的連結橋梁</p>
    </div>
  </section>
  <!--作品集-->
  <section class="featured-carousel">
    <div class="container">
      <h2 class="section-title">推薦作品</h2>
      <div class="carousel-wrapper" onmouseenter="hoverEnter()" onmouseleave="hoverLeave()">
        <button class="arrow left" onclick="scrollCarousel(-1)">←</button>
        <div class="carousel-window">
          <div class="carousel" id="video-carousel">
            <div class="video-card">
              <div class="video-shell"
                style="background-color: #e64c3c; display: flex; align-items: center; justify-content: center; font-size: 48px; color: white;">
                1
              </div>
            </div>
            <div class="video-card">
              <div class="video-shell"
                style="background-color: #e79c3c; display: flex; align-items: center; justify-content: center; font-size: 48px; color: white;">
                2
              </div>
            </div>
            <div class="video-card">
              <div class="video-shell"
                style="background-color: #e74c3c; display: flex; align-items: center; justify-content: center; font-size: 48px; color: white;">
                3
              </div>
            </div>
            <div class="video-card">
              <div class="video-shell"
                style="background-color: #3498db; display: flex; align-items: center; justify-content: center; font-size: 48px; color: white;">
                4
              </div>
            </div>
            <div class="video-card">
              <div class="video-shell"
                style="background-color: #f39c12; display: flex; align-items: center; justify-content: center; font-size: 48px; color: black;">
                5
              </div>
            </div>
          </div>
        </div>
        <button class="arrow right" onclick="scrollCarousel(1)">→</button>
      </div>
    </div>
  </section>
  <!-- 免費素材庫介紹區 -->
  <section class="resources-intro" id="resources">
    <div class="container">
      <h2>免費素材庫 Free Resources</h2>
      <p>提供免費音樂、音效與視覺素材，幫助你輕鬆創作！</p>
    </div>
  </section>
  <!-- 三分類入口卡片區 -->
  <section class="resource-portal">
    <div class="container cards">
      <!-- 音樂素材卡片 -->
      <a class="card" href="#music">
        <img alt="音樂素材" src="https://via.placeholder.com/300x200?text=音樂素材" />
        <h3>音樂素材</h3>
        <p>免費 BGM 與音效下載</p>
      </a>
      <!-- 插圖素材卡片 -->
      <a class="card" href="#images">
        <img alt="插圖素材" src="https://via.placeholder.com/300x200?text=插圖素材" />
        <h3>插圖素材</h3>
        <p>邊框、裝飾、背景圖免費使用</p>
      </a>
      <!-- 模板素材卡片 -->
      <a class="card" href="#templates">
        <img alt="模板素材" src="https://via.placeholder.com/300x200?text=模板素材" />
        <h3>模板素材</h3>
        <p>Shorts、字幕、封面排版模板包</p>
      </a>
    </div>
  </section>
  <!-- 頁尾區塊（Footer） -->
  <footer>
    <div class="container footer-content">
      <div class="footer-left">
        <p>© 2026 曲守工作室 Kyokumori Studio.</p>
        <p>以角色為核心，連結創作、技術與觀眾的情感橋梁。</p>
      </div>
      <div class="footer-right">
        <p>📧 hello@kyokumori.studio</p>
        <p>☕ <a href="#">Ko-fi: ko-fi.com/kyokumori</a></p>
        <p>🕊️ X: @kyokumori_studio</p>
      </div>
    </div>
  </footer>
  <script>
    const carousel = document.getElementById("video-carousel");
    const gap = 24;
    let cardWidth;
    let isAnimating = false;
    let autoScrollTimer;
    let isHovered = false;

    let initialCards = [];

    function setupCarousel() {
      const rawCards = Array.from(carousel.querySelectorAll('.video-card'));

      cardWidth = rawCards[0].offsetWidth + gap;

      const first = rawCards[0].cloneNode(true);
      const last = rawCards[rawCards.length - 1].cloneNode(true);

      first.classList.add('is-clone');
      last.classList.add('is-clone');

      carousel.insertBefore(last, rawCards[0]);
      carousel.appendChild(first);

      carousel.style.transform = `translateX(-${cardWidth}px)`;

      autoScrollTimer = setInterval(() => {
        if (!isHovered) scrollCarousel(1);
      }, 3000);
    }

    let pendingMoveCard = null;

    function scrollCarousel(direction) {
      if (isAnimating) return;
      isAnimating = true;

      const allCards = Array.from(carousel.querySelectorAll(".video-card"))
        .filter(c => !c.classList.contains("is-clone"));

      // 先決定好要搬的卡片是哪一張
      if (direction === 1) {
        pendingMoveCard = allCards[0]; // 頭搬到尾
      } else {
        pendingMoveCard = allCards[allCards.length - 1]; // 尾搬到頭
      }

      const move = direction * cardWidth;
      const currentX = getTranslateX(carousel);
      const newX = currentX - move;

      carousel.style.transition = "transform 0.4s ease";
      carousel.style.transform = `translateX(${newX}px)`;

      carousel.addEventListener('transitionend', function handleTransitionEnd() {
        carousel.removeEventListener('transitionend', handleTransitionEnd);
        carousel.style.transition = "none";

        if (direction === 1) {
          carousel.appendChild(pendingMoveCard);
        } else {
          carousel.insertBefore(pendingMoveCard, carousel.firstElementChild);
        }

        carousel.style.transform = `translateX(-${cardWidth}px)`;
        isAnimating = false;
        pendingMoveCard = null;
      }, { once: true });
    }

    function getTranslateX(element) {
      const style = window.getComputedStyle(element);
      const matrix = new WebKitCSSMatrix(style.transform);
      return matrix.m41;
    }

    function pauseAutoScroll() {
      isHovered = true;
      clearInterval(autoScrollTimer);
    }

    function resumeAutoScroll() {
      isHovered = false;
      clearInterval(autoScrollTimer);
      autoScrollTimer = setInterval(() => {
        if (!isHovered) scrollCarousel(1);
      }, 3000);
    }

    function hoverEnter() {
      showArrows();
      pauseAutoScroll();
    }

    function hoverLeave() {
      hideArrows();
      resumeAutoScroll();
    }

    function showArrows() {
      document.querySelectorAll(".arrow").forEach(btn => btn.style.opacity = 1);
    }

    function hideArrows() {
      document.querySelectorAll(".arrow").forEach(btn => btn.style.opacity = 0);
    }

    window.addEventListener("load", () => {
      setupCarousel();
    });

    document.querySelectorAll('.lazy-iframe').forEach(iframe => {
      iframe.addEventListener('load', () => {
        iframe.style.opacity = '1';
      });
    });
  </script>
</body>

</html>
